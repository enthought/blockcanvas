

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Application Overview &mdash; BlockCanvas v3.2.2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '3.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/et.ico"/>
    <link rel="top" title="BlockCanvas v3.2.2 documentation" href="index.html" />
    <link rel="next" title="General Comments" href="notes.html" />
    <link rel="prev" title="Welcome to the BlockCanvas documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="notes.html" title="General Comments"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to the BlockCanvas documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">BlockCanvas v3.2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="application-overview">
<h1>Application Overview<a class="headerlink" href="#application-overview" title="Permalink to this headline">¶</a></h1>
<p>This application is intended to explore ideas for visually edit/run/debug
data flow networks and explore the data generated by them.</p>
<img alt="_images/screen_capture.png" src="_images/screen_capture.png" />
<p>Users can see two (partially) synchronized views of the data flow.  One is the
actual python code that represents the data flow, and the other is a visual
layout of the data flow on a canvas.  The canvas is fairly simple in that it
doesn&#8217;t show all the input/output ports of functions &#8211; it simply draws a single
line between two related functions.  This is a valuable view, but we will likely
want to enhance it with a &#8220;port&#8221; view later.  Users can move components around
on the graph.  They can select multiple items with Ctrl-click, and they can move
multiple items as a group.  They can also delete functions with the &#8220;Del&#8221; key.
(The &#8220;close&#8221; icon in the corner of functions should also delete components, but
buttons are working right now.)</p>
<p>If you edit the code view, the canvas will update (and through out any layout
you may have done &#8211; bad).  However, editing the workflow on the canvas does not
synchronize to the code view &#8211; bad.  Figuring out the correct underlying model
for this is a major future task for us.</p>
<p>There are two additional widgets in the view.  One is a search window that
allows you to search through a list of functions.  You can drag/drop functions
from this window onto the canvas and that component is added.  It names the
inputs of the function the same name as they are declared in the function.  The
output is generically named &#8220;result&#8221;.  This can be improved if we parse the
function code looking for a return statement.  For our rock physics libraries,
this will work pretty well.  Also, we can do better than this with has_units
functions because their inputs and outputs are available as attributes on the
function.  If you add a function to the canvas, it is not added to the code as
we do not have a code generator from blocks at the moment.  This is not to hard
to write, but it also may not be the desired model... (we&#8217;ll have to see).</p>
<p>The other widget shows the input/output/functions currently on the function.
It will udpate as the canvas updates.  You can sort by type or name.  In the
future, clicking on one of these should highlight the function blocks on the
canvas that it pertains to.  Also, the code view should indicate the lines
it pertains to.</p>
<p>That is it so far.  I would like to have function input/output editors, and
a context viewer up and running fairly soon.</p>
</div>
<div class="section" id="architecture">
<h1>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h1>
<p>This entire application centers around viewing/editing/debugging a graph
representation of executable Python code and viewing/manipulating the input/
outut data to the graph.  The &#8220;executable graph&#8221; is currently represented
as a Block from enthought.numerical_modelling.  It is a reasonable start, but
may not suffice for editing graphs [to be determined].  The data part is likely
to be a NumericContext item, but it should probably work (at least for execution
if it is a lowly dictionary).</p>
<p>Our current application generally breaks up into 3 chunks of functionality that
are bound together by the <tt class="docutils literal"><span class="pre">Display</span></tt> class in <tt class="docutils literal"><span class="pre">main.py</span></tt>.  They are the
1) search widget (<tt class="docutils literal"><span class="pre">function_search.py</span></tt>, and <tt class="docutils literal"><span class="pre">function_search_ui.py</span></tt>, 2)
variable display widget (<tt class="docutils literal"><span class="pre">block_variables_ui.py</span></tt>), and 3) The canvas which
makes up the bulk of the application code (see below).</p>
<p>The other important class is  the <tt class="docutils literal"><span class="pre">BlockGraphController</span></tt> which ties the
canvas view to its underlying <tt class="docutils literal"><span class="pre">Block</span></tt> model.  Users interact with the canvas,
but the controller decides what to do with these individual actions.  It also
updates the view if the block changes underneath it.  This class will likely
need to get inputs from the <tt class="docutils literal"><span class="pre">block_variables_ui</span></tt> as well to highlight or
&#8220;flash&#8221; blocks that are highlighted on the canvas.  It will likely want to
control the code window in the future as well.</p>
<div class="section" id="canvas-architecture">
<h2>Canvas Architecture<a class="headerlink" href="#canvas-architecture" title="Permalink to this headline">¶</a></h2>
<p>The basic building blocks for the canvas are the:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Canvas Related Classes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>SelectionContainer</td>
<td><p class="first">This is an enhanced Enable Container that can
manage the selection of multiple components within
it.  This list of selections is managed by a
SelectionManager object.</p>
<p class="last">Whenever this container gets events like &#8220;delete&#8221;
or &#8220;move&#8221;, it hands off the actual work to a
controller that decides a) what to do with the
visualization and b) what to do with the
underlying model.  In our case, this is the
BlockGraphController.</p>
</td>
</tr>
<tr><td>SelectioManager</td>
<td>Actually, this guy does most of the work for the
SelectionContainer.</td>
</tr>
<tr><td>ISelectable</td>
<td>Interface required by the SelectionManager to deal
with &#8220;Selectable&#8221; items on a canvas.</td>
</tr>
<tr><td>SelectableComponentMixin</td>
<td>Mixin that handles selecting and moving state
tranisitions for items on the canvas.  It
handles this aspect for EnableBox.</td>
</tr>
<tr><td>EnableLine</td>
<td>connection lines between function boxes.  The end
points of the lines are connected to an input and
an ouput function and the line is redrawn any time
one of the function boxes is moved.</td>
</tr>
<tr><td>EnableImageButton</td>
<td>Button Component that changes button image on
role-over and fires a clicked event.  It doesn&#8217;t
yet give visual feedback when clicked.  This is
currently only used as the CloseButton in the
EnableFunctionBox.</td>
</tr>
<tr><td>CloseButton</td>
<td>Extends button to anchor it the top right corner
of its container.  Also resets the default icon to
use the close icons.</td>
</tr>
<tr><td>EnableBox</td>
<td>Generic labeled box that participate in selection
on a canvas.  Something like this guy should go in
a generic object canvas in Enable.</td>
</tr>
<tr><td>EnableFunctionBox</td>
<td>A specialized version of EnableBox for drawing
functions on the canvas.  It also adds the
CloseButton to the function.</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/e-logo-rev.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Application Overview</a></li>
<li><a class="reference internal" href="#architecture">Architecture</a><ul>
<li><a class="reference internal" href="#canvas-architecture">Canvas Architecture</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to the BlockCanvas documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="notes.html"
                        title="next chapter">General Comments</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/readme.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="notes.html" title="General Comments"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to the BlockCanvas documentation!"
             >previous</a> |</li>
        <li><a href="index.html">BlockCanvas v3.2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, Enthought.
      Last updated on Jan 27, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
  </body>
</html>